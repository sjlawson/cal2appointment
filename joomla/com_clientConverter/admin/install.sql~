DROP TABLE IF EXISTS `#__nc_nucleocal`;
DROP TABLE IF EXISTS `#__nc_slot`;
Drop TABLE IF EXISTS `#__nc_exception`;
DROP TABLE IF EXISTS `#__nc_slot_alloc`;
DROP TABLE IF EXISTS `#__nc_staff`;
DROP TABLE IF EXISTS `#__nc_staff`;


Create TABLE `#__nc_nucleocal` (
  `id` int(11) NOT NULL auto_increment PRIMARY KEY,
  `greeting` varchar(25) NOT NULL,
  `calendar_title` varchar(45) NULL DEFAULT NULL,

) ENGINE=MyISAM AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;

Create TABLE `#__nc_options` (
  `option_id` int(11) NOT NULL auto_increment PRIMARY KEY,
  `field_name` varchar(45) NOT NULL,
  `field_description` varchar(1024) NULL DEFAULT NULL,
  `field_tooltip` varchar(255) NULL DEFAULT NULL,
  `field_value` varchar(45) NULL DEFAULT NULL)
  ENGINE=MyISAM AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;

Create TABLE `#__nc_slot` (
 `slot_id` int(11) NOT NULL auto_increment PRIMARY KEY,
 `slot_title` varchar(45) NULL DEFAULT NULL,
 `time_start` time NULL DEFAULT NULL,
 `time_end` time NULL DEFAULT NULL,
 `default_slot` tinyint(4) NOT NULL DEFAULT '1',
 `weekdays_csv` varchar(30) NOT NULL DEFAULT 'Mon,Tue,Wed,Thu,Fri', 
 `openings` int(11) NOT NULL DEFAULT '3')
 ENGINE=MyISAM AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;

Create TABLE `#__nc_exception` (
 `exception_id` int(11) NOT NULL auto_increment PRIMARY KEY,
 `exception_date` DATE NULL DEFAULT NULL,
 `slot_id` int(11)  NULL DEFAULT NULL,
 `on_staff_id_csv` varchar(45) NULL DEFAULT NULL,
 `off_staff_id_csv` varchar(45) NULL DEFAULT NULL,
 `all_off` tinyint(4) NOT NULL DEFAULT '0',
 `openings` int(11) NOT NULL DEFAULT '3') 
 ENGINE=MyISAM AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;

Create TABLE `#__nc_slot_alloc` (
 `slot_alloc_id` int(11) NOT NULL auto_increment PRIMARY KEY,
 `slot_id` int(11) NULL DEFAULT NULL,
 `staff_id` int(11) NULL DEFAULT NULL) 
 ENGINE=MyISAM AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;

Create TABLE `#__nc_staff` (
 `staff_id`  int(11) NOT NULL auto_increment PRIMARY KEY,
 `firstname` varchar(45) NULL DEFAULT NULL,
 `lastname`  varchar(45) NULL DEFAULT NULL,
 `email` varchar(128) NULL DEFAULT NULL,
 `contact_info` varchar(1024) NULL DEFAULT NULL )
 ENGINE=MyISAM AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;

CREATE TABLE `#__nc_appointment` (
       `appointment_id` INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY, 
       `slot_id` INT NOT NULL, 
       `app_date` DATE NOT NULL, 
       `staff_id` INT NULL DEFAULT NULL, 
       `firstname` VARCHAR(60) NOT NULL, 
       `lastname` VARCHAR(60) NOT NULL, 
       `email` VARCHAR(128) NOT NULL, 
       `phone` VARCHAR(30) NULL DEFAULT NULL,	
       `notes` MEDIUMTEXT NULL DEFAULT NULL, 
       `req_staff_id` INT NULL DEFAULT NULL) 
       ENGINE = MyISAM  AUTO_INCREMENT=0 CHARACTER SET utf8 COLLATE utf8_general_ci;

Create TABLE `#__nc_event` (
 `event_id` int(11) NOT NULL auto_increment PRIMARY KEY,
 `event_start` datetime NULL DEFAULT NULL,
 `event_end` datetime NULL DEFAULT NULL,
 `allday` tinyint(4) NOT NULL DEFAULT '0',
 `title` varchar(80) NULL DEFAULT NULL,
 `description` MEDIUMTEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL)
 ENGINE=MyISAM AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;

Insert INTO `#__nc_nucleocal` (`greeting`,`calendar_title`) VALUES 
       ('Your scheduling has just gone Nuclear!','The Nuclear Calendar');

Insert INTO `#__nc_options` (`field_name`,`field_value`,`field_description`, `field_tooltip`) VALUES
       ('show_staff','0','Show names of staff who have been assigned to a slot', 'Show names of staff who have been assigned to a slot'),
       ('sync_staff_openings','0','Make appointment slot openings match assigned staff','Make appointment slot openings match assigned staff'),
       ('auto_assign_staff','0','When an appointment is requested, auto-assign the first available staff member to the appointment','Auto-assign available staff to appointments'),
       ('allow_staff_req','0','Allow request for specific staff when creating an appointment','Allow request for specific staff when creating an appointment');
       

Insert INTO `#__nc_slot` ( `slot_title`,`time_start`, `time_end`) VALUES 
( 'Early Morning', '9:00:00', '10:00:00'),
( 'Late Morning', '10:00:00', '11:00:00'),
( 'Early Afternoon', '13:00:00', '14:00:00'),
( 'Late Afternoon', '15:00:00', '16:00:00');

Insert INTO `#__nc_staff` (`firstname`, `lastname`) VALUES 
       ('Slot1', 'Staff'),
       ('Slot2', 'Staff'),
       ('Slot3', 'Staff'),
       ('Slot4', 'Staff');

Insert INTO `#__nc_slot_alloc` (`slot_id`, `staff_id`) VALUES 
       ( '1','1'),
       ( '2','2'),
       ( '3','3'),
       ( '4','4');

Insert INTO `#__nc_exception` (`exception_date`, `all_off`) VALUES 
       ( '2010-12-25',1),
       ( '2011-12-25',1),
       ( '2012-12-25',1);